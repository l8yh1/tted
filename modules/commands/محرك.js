if (!global.engineIntervals) global.engineIntervals = new Map();

module.exports.config = {
  name: "Ù…Ø­Ø±Ùƒ",
  version: "1.0.0",
  hasPermssion: 2,
  credits: "Replit Agent",
  description: "ÙŠØ±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ© (ØªÙØ¹ÙŠÙ„/Ø§ÙŠÙ‚Ø§Ù)",
  commandCategory: "Ù†Ø¸Ø§Ù…",
  prefix: true,
  usages: "[ØªÙØ¹ÙŠÙ„/Ø§ÙŠÙ‚Ø§Ù]",
  cooldowns: 5
};

console.log("DEBUG: Loaded 'Ù…Ø­Ø±Ùƒ' command config.");

module.exports.run = async function ({ api, event, args }) {
  const { threadID, senderID } = event;
  const action = args[0]?.toLowerCase();

  // Admin Check
  const admins = (global.config.ADMINBOT || []).map(String);
  if (!admins.includes(String(senderID))) {
    return api.sendMessage("âŒ Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø± Ù…Ø®ØµØµ Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ø¨ÙˆØª ÙÙ‚Ø·.", threadID);
  }

  // Handle "Ø§ÙŠÙ‚Ø§Ù" or "stop" or "off"
  if (action === "Ø§ÙŠÙ‚Ø§Ù" || action === "off" || action === "stop") {
    if (global.engineIntervals.has(threadID)) {
      clearInterval(global.engineIntervals.get(threadID));
      global.engineIntervals.delete(threadID);
      return api.sendMessage("â¹ï¸ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø­Ø±Ùƒ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©.", threadID);
    } else {
      return api.sendMessage("âš ï¸ Ø§Ù„Ù…Ø­Ø±Ùƒ Ù„ÙŠØ³ Ù‚ÙŠØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©.", threadID);
    }
  }

  // Handle "ØªÙØ¹ÙŠÙ„" or "on" or "start"
  if (action === "ØªÙØ¹ÙŠÙ„" || action === "on" || action === "start") {
    if (global.engineIntervals.has(threadID)) {
      return api.sendMessage("âš ï¸ Ø§Ù„Ù…Ø­Ø±Ùƒ Ù‚ÙŠØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¨Ø§Ù„ÙØ¹Ù„.", threadID);
    }

    api.sendMessage("ğŸš€ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ø­Ø±Ùƒ Ø¨Ù†Ø¬Ø§Ø­ (Ø±Ø³Ø§Ù„Ø© ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©).", threadID);

    const interval = setInterval(() => {
      api.sendMessage(`â¥ ğğğ“ ğ’ğğˆğƒğ„ğ‘ğ’ â›•

ğ–­-âšª-ğ’‹¡-â›•-ğ—«â‚-ğ’‘-ğ–­³-ğŸ•¸-ğ’„¬-â›•-ğ—©â‚-ğ’‘-ğ–®-âšª-ğ’‹™-â›•-ğ—â‚-ğ’‘-ğ–­œ-ğŸ•¸-ğ’„¬-â›•-ğ—­â‚-ğ’‘-â˜­-âšª-ğ’‹™-â›•-ğ–­-âšª-ğ’‹¡-â›•-ğ—«â‚-ğ’‘-ğ–­³-ğŸ•¸-ğ’„¬-â›•-ğ—©â‚-ğ’‘-ğ–®-âšª-ğ’‹™-â›•-ğ—â‚-ğ’‘-ğ–­œ-ğŸ•¸-ğ’„¬-â›•-ğ—­â‚-ğ’‘-â˜­-âšª-ğ’‹™-â›•-ğ–­-âšª-ğ’‹¡-â›•-ğ—«â‚-ğ’‘-ğ–­³-ğŸ•¸-ğ’„¬-â›•-ğ—©â‚-ğ’‘-ğ–®-âšª-ğ’‹™-â›•-ğ—â‚-ğ’‘-ğ–­œ-ğŸ•¸-ğ’„¬-â›•-ğ—­â‚-ğ’‘-â˜­-âšª-ğ’‹™-â›•-ğ–­-âšª-ğ’‹¡-â›•-ğ—«â‚-ğ’‘-ğ–­³-ğŸ•¸-ğ’„¬-â›•-ğ—©â‚-ğ’‘-ğ–®-âšª-ğ’‹™-â›•-ğ—â‚-ğ’‘-ğ–­œ-ğŸ•¸-ğ’„¬-â›•-ğ—­â‚-ğ’‘-â˜­-âšª-ğ’‹™-â›•-ğ–­-âšª-ğ’‹¡-â›•-ğ—«â‚-ğ’‘-ğ–­³-ğŸ•¸-ğ’„¬-â›•-ğ—©â‚-ğ’‘-ğ–®-âšª-ğ’‹™-â›•-ğ—â‚-ğ’‘-ğ–­œ-ğŸ•¸-ğ’„¬-â›•-ğ—­â‚-ğ’‘-â˜­-âšª-ğ’‹™-â›•-ğ–­-âšª-ğ’‹¡-â›•-ğ—«â‚-ğ’‘-ğ–­³-ğŸ•¸-ğ’„¬-â›•-ğ—©â‚-ğ’‘-ğ–®-âšª-ğ’‹™-â›•-ğ—â‚-ğ’‘-ğ–­œ-ğŸ•¸-ğ’„¬-â›•-ğ—­â‚-ğ’‘-â˜­-âšª-ğ’‹™-â›•-ğ–­-âšª-ğ’‹¡-â›•-ğ—«â‚-ğ’‘-ğ–­³-ğŸ•¸-ğ’„¬-â›•-ğ—©â‚-ğ’‘-ğ–®-âšª-ğ’‹™-â›•-ğ—â‚-ğ’‘-ğ–­œ-ğŸ•¸-ğ’„¬-â›•-ğ—­â‚-ğ’‘-â˜­-âšª-ğ’‹™-â›•-ğ–­-âšª-ğ’‹¡-â›•-ğ—«â‚-ğ’‘-ğ–­³-ğŸ•¸-ğ’„¬-â›•-ğ—©â‚-ğ’‘-ğ–®-âšª-ğ’‹™-â›•-ğ—â‚-ğ’‘-ğ–­œ-ğŸ•¸-ğ’„¬-â›•-ğ—­â‚-ğ’‘-â˜­-âšª-ğ’‹™-â›•-ğ–­-âšª-ğ’‹¡-â›•-ğ—«â‚-ğ’‘-ğ–­³-ğŸ•¸-ğ’„¬-â›•-ğ—©â‚-ğ’‘-ğ–®-âšª-ğ’‹™-â›•-ğ—â‚-ğ’‘-ğ–­œ-ğŸ•¸-ğ’„¬-â›•-ğ—­â‚-ğ’‘-â˜­-âšª-ğ’‹™-â›•-


 â€Œ           â¤ÍŸÍŸÍÍâšª                       

     ğ—¥ğ—²ğ˜ğ˜‚ğ—¿ğ—» ğ—¼ğ—³ ğ˜ğ—µğ—² ğ——ğ—²ğ—®ğ—±      
 â€Œ â€Œ   â”€âƒÌ½Íğ— ğ–¦œ.ğ—¹É™à»‹âƒªâƒ”ÍœÍ¡ğš¾âƒŸâƒ—ÊŒâƒ•É¨ğ—¡ğŸ¦‡ğ†ºğ…¥âƒğ—¦âœ¬      

 â£  ğ†ºğ…¥âƒğ—”ğ—¡ğ—šğ—˜ğ—Ÿ Û¬à¼ ğ—¨Ò‰ğ—¿ğ—¶ğ—²ğ—¹ âšªğ’‚`, threadID);
    }, 30 * 1000);

    global.engineIntervals.set(threadID, interval);
  } else {
    return api.sendMessage("âš ï¸ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…: !Ù…Ø­Ø±Ùƒ [ØªÙØ¹ÙŠÙ„/Ø§ÙŠÙ‚Ø§Ù]", threadID);
  }
};
